INSERT INTO parametro (NOMBRE, VALOR, RFC_EMPRESA) values ("cfdi_status","30","SISTEMA");
select * from parametro where NOMBRE = "cfdi_status";

select count(*) from cfd_recepcion force index(IDX_ESTADO_ENVIO_SAT) where ESTADO_ENVIO_SAT 
is null and FECHA_RECEPCION < DATE_SUB(NOW(), INTERVAL 
(SELECT valor FROM parametro  WHERE nombre = "cfdi_status") MINUTE);

INSERT INTO parametro (NOMBRE, VALOR, RFC_EMPRESA) values ("cfdi_extemporaneo","2024-08-23 12:00:00","SISTEMA");
select * from parametro where NOMBRE = "cfdi_extemporaneo";

select count(*) from cfd_recepcion force index(IDX_FECHA_RECEP_ESTADO_ENVIO_SAT) 
WHERE ESTADO_ENVIO_SAT = 'Comprobante recibido extemporÃ¡neamente' AND 
FECHA_RECEPCION >= (select valor from parametro where nombre = "cfdi_extemporaneo");

INSERT INTO parametro (NOMBRE, VALOR, RFC_EMPRESA) values ("cfdi_incidentes","30","SISTEMA");
select * from parametro p where p.NOMBRE = "cfdi_incidentes";

select count(*) from cfd_recepcion cr force index(IDX_FECHA_RECEP_ESTADO_ENVIO_SAT)
where ESTADO_ENVIO_SAT = 'Comprobante recibido con incidencias' and FECHA_RECEPCION >= date_sub(now(), interval 
(select valor from parametro p where p.nombre = "cfdi_incidentes") minute);

INSERT INTO parametro (NOMBRE, VALOR, RFC_EMPRESA) values ("cr_status","30","SISTEMA");
select * from parametro p where p.NOMBRE = "cr_status";

select count(*) from cfd_recepcion_cr where ESTADO_ENVIO_SAT 
is null and FECHA_RECEPCION <= DATE_SUB(NOW(), INTERVAL 
(SELECT valor FROM parametro  WHERE nombre = "cr_status") MINUTE);